import{s as me,n as pe,r as ve,o as _e}from"../chunks/scheduler.96db699d.js";import{S as ye,i as xe,g as o,s as k,m as we,h as a,y as V,c as D,j as y,f as c,n as Te,k as v,l as e,a as J,x as t,z as M,A as R}from"../chunks/index.7cdda8aa.js";import{C as Ce}from"../chunks/js.cookie.9e0ef7a3.js";const he="https://nbq1wgzh9d.execute-api.eu-west-2.amazonaws.com/stagetest1/",Ee=()=>{let u={UserPoolId:"eu-west-2_lYdgNFNRz",ClientId:"15j3o5j00ekao3btgpnuj7t1jj"};return new Ce(u)},ge=async()=>{var n=await Ee().getCurrentUser();if(n!=null)return n.getSession(function(l,p){if(l){alert("in getSession err todo: Send the user to the log in page"+l.message||JSON.stringify(l));return}return p});alert("Todo: send the user to the log in page")};async function se(u,n,l=null){let p=await ge();if(p==null){alert(" no session, todo: goto log in ");return}let g=await p.getIdToken().getJwtToken();if(n!=="POST"&&n!=="PUT"&&n!=="GET"&&n!=="DELETE")return{status:"error",message:`Method ${n} not implemented.`};try{let r={};r.Authorization=g;let i=null;if(n==="POST"||n==="PUT")l instanceof FormData||(r["Content-Type"]="application/json",l=JSON.stringify(l)),i=await fetch(`${he}${u}`,{method:n,mode:"cors",body:l,headers:r});else{let _=new URL(`${he}${u}`);l&&(_.search=new URLSearchParams(l).toString()),i=await fetch(`${_}`,{headers:r,mode:"cors",method:n})}if(i&&!i.ok){const I=(await i.json()).message;return console.log("TODO: needst to log out",I),{status:"nok",message:I}}try{console.log("response: ",i);const _=await i.json();return console.log("resJson.data: ",_["body-json"].data),{status:"ok",data:_??null}}catch{return{status:"ok",data:{}}}}catch(r){return console.log(r.message),{status:r.status||"error",message:r.message||"Unexpected error has happened."}}}function be(u){let n,l="home",p,g,r,i,_="See Profile",I,x,d,m,U,h,G="Age",P,w,Y,S,L,oe="Height",$,T,K,F,O,Q,C,X,E,N,ae="Submit",Z,b,z,le="I already stored data on the server!",ee,j,A,re="Delete user",te,ie;return{c(){n=o("h1"),n.textContent=l,p=k(),g=o("div"),r=k(),i=o("a"),i.textContent=_,I=k(),x=o("form"),d=o("div"),m=o("div"),U=o("div"),h=o("label"),h.textContent=G,P=k(),w=o("input"),Y=k(),S=o("div"),L=o("label"),L.textContent=oe,$=k(),T=o("input"),K=k(),F=o("div"),O=o("label"),Q=we(`Income
                    `),C=o("input"),X=k(),E=o("div"),N=o("button"),N.textContent=ae,Z=k(),b=o("div"),z=o("button"),z.textContent=le,ee=k(),j=o("div"),A=o("button"),A.textContent=re,this.h()},l(s){n=a(s,"H1",{"data-svelte-h":!0}),V(n)!=="svelte-1bgpw6n"&&(n.textContent=l),p=D(s),g=a(s,"DIV",{}),y(g).forEach(c),r=D(s),i=a(s,"A",{href:!0,"data-svelte-h":!0}),V(i)!=="svelte-gb5jrz"&&(i.textContent=_),I=D(s),x=a(s,"FORM",{});var f=y(x);d=a(f,"DIV",{style:!0});var B=y(d);m=a(B,"DIV",{style:!0});var q=y(m);U=a(q,"DIV",{style:!0});var H=y(U);h=a(H,"LABEL",{for:!0,"data-svelte-h":!0}),V(h)!=="svelte-wmd51a"&&(h.textContent=G),P=D(H),w=a(H,"INPUT",{id:!0,name:!0,autocomplete:!0}),H.forEach(c),Y=D(q),S=a(q,"DIV",{style:!0});var W=y(S);L=a(W,"LABEL",{for:!0,"data-svelte-h":!0}),V(L)!=="svelte-dqzz1w"&&(L.textContent=oe),$=D(W),T=a(W,"INPUT",{id:!0,name:!0,autocomplete:!0}),W.forEach(c),K=D(q),F=a(q,"DIV",{});var ue=y(F);O=a(ue,"LABEL",{for:!0});var ne=y(O);Q=Te(ne,`Income
                    `),C=a(ne,"INPUT",{id:!0,name:!0,autocomplete:!0}),ne.forEach(c),ue.forEach(c),q.forEach(c),X=D(B),E=a(B,"DIV",{style:!0});var ce=y(E);N=a(ce,"BUTTON",{"data-svelte-h":!0}),V(N)!=="svelte-1rn6wl3"&&(N.textContent=ae),ce.forEach(c),Z=D(B),b=a(B,"DIV",{style:!0});var de=y(b);z=a(de,"BUTTON",{"data-svelte-h":!0}),V(z)!=="svelte-1eqov4f"&&(z.textContent=le),de.forEach(c),B.forEach(c),ee=D(f),j=a(f,"DIV",{style:!0});var fe=y(j);A=a(fe,"BUTTON",{"data-svelte-h":!0}),V(A)!=="svelte-za3tjx"&&(A.textContent=re),fe.forEach(c),f.forEach(c),this.h()},h(){v(i,"href","/user-details"),v(h,"for","age"),v(w,"id","age"),v(w,"name","age"),v(w,"autocomplete","off"),e(U,"margin","10px 0px"),v(L,"for","height"),v(T,"id","height"),v(T,"name","height"),v(T,"autocomplete","off"),e(S,"margin","10px 0px"),v(C,"id","pass"),v(C,"name","income"),v(C,"autocomplete","off"),v(O,"for","income"),e(m,"display","flex"),e(m,"flex-direction","column"),e(m,"align-items","end"),e(E,"width","100%"),e(E,"display","flex"),e(E,"align-items","center"),e(E,"justify-content","center"),e(E,"margin-top","10px"),e(b,"width","100%"),e(b,"display","flex"),e(b,"align-items","center"),e(b,"justify-content","center"),e(b,"margin-top","10px"),e(d,"width","100%"),e(d,"display","flex"),e(d,"flex-direction","column"),e(d,"align-items","center"),e(d,"justify-content","center"),e(j,"width","100%"),e(j,"display","flex"),e(j,"align-items","center"),e(j,"justify-content","center"),e(j,"margin-top","10px")},m(s,f){J(s,n,f),J(s,p,f),J(s,g,f),J(s,r,f),J(s,i,f),J(s,I,f),J(s,x,f),t(x,d),t(d,m),t(m,U),t(U,h),t(U,P),t(U,w),M(w,u[0]),t(m,Y),t(m,S),t(S,L),t(S,$),t(S,T),M(T,u[1]),t(m,K),t(m,F),t(F,O),t(O,Q),t(O,C),M(C,u[2]),t(d,X),t(d,E),t(E,N),t(d,Z),t(d,b),t(b,z),t(x,ee),t(x,j),t(j,A),te||(ie=[R(w,"input",u[5]),R(T,"input",u[6]),R(C,"input",u[7]),R(N,"click",u[8]),R(z,"click",je),R(A,"click",u[9])],te=!0)},p(s,[f]){f&1&&w.value!==s[0]&&M(w,s[0]),f&2&&T.value!==s[1]&&M(T,s[1]),f&4&&C.value!==s[2]&&M(C,s[2])},i:pe,o:pe,d(s){s&&(c(n),c(p),c(g),c(r),c(i),c(I),c(x)),te=!1,ve(ie)}}}const je=async u=>{u.preventDefault()};function ke(u,n,l){let p,g,r;const i=async()=>{await se("compare-youself","POST",{age:p,height:g,income:r})},_=async()=>{const h=await se("compare-youself","DELETE");console.log("response: ",h)};_e(async()=>{const G=await(await ge()).getAccessToken().getJwtToken(),P=await se(`compare-youself/single?accessToken=${G}`,"GET");console.log("rspons: ",P.data["body-json"]),P.data["body-json"].data.length!=0&&(l(0,p=P.data["body-json"].data[0].age),l(1,g=P.data["body-json"].data[0].height),l(2,r=P.data["body-json"].data[0].income))});function I(){p=this.value,l(0,p)}function x(){g=this.value,l(1,g)}function d(){r=this.value,l(2,r)}return[p,g,r,i,_,I,x,d,async h=>{h.preventDefault(),i()},async h=>{h.preventDefault(),_()}]}class Pe extends ye{constructor(n){super(),xe(this,n,ke,be,me,{})}}export{Pe as component};
