var $e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ke(n){if(n.__esModule)return n;var t=n.default;if(typeof t=="function"){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(n).forEach(function(e){var s=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(r,e,s.get?s:{enumerable:!0,get:function(){return n[e]}})}),r}var _={},Se={};Se.byteLength=Ft;Se.toByteArray=Pt;Se.fromByteArray=Mt;var j=[],L=[],_t=typeof Uint8Array<"u"?Uint8Array:Array,_e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var te=0,It=_e.length;te<It;++te)j[te]=_e[te],L[_e.charCodeAt(te)]=te;L["-".charCodeAt(0)]=62;L["_".charCodeAt(0)]=63;function ft(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=n.indexOf("=");r===-1&&(r=t);var e=r===t?0:4-r%4;return[r,e]}function Ft(n){var t=ft(n),r=t[0],e=t[1];return(r+e)*3/4-e}function Rt(n,t,r){return(t+r)*3/4-r}function Pt(n){var t,r=ft(n),e=r[0],s=r[1],a=new _t(Rt(n,e,s)),f=0,u=s>0?e-4:e,l;for(l=0;l<u;l+=4)t=L[n.charCodeAt(l)]<<18|L[n.charCodeAt(l+1)]<<12|L[n.charCodeAt(l+2)]<<6|L[n.charCodeAt(l+3)],a[f++]=t>>16&255,a[f++]=t>>8&255,a[f++]=t&255;return s===2&&(t=L[n.charCodeAt(l)]<<2|L[n.charCodeAt(l+1)]>>4,a[f++]=t&255),s===1&&(t=L[n.charCodeAt(l)]<<10|L[n.charCodeAt(l+1)]<<4|L[n.charCodeAt(l+2)]>>2,a[f++]=t>>8&255,a[f++]=t&255),a}function Bt(n){return j[n>>18&63]+j[n>>12&63]+j[n>>6&63]+j[n&63]}function bt(n,t,r){for(var e,s=[],a=t;a<r;a+=3)e=(n[a]<<16&16711680)+(n[a+1]<<8&65280)+(n[a+2]&255),s.push(Bt(e));return s.join("")}function Mt(n){for(var t,r=n.length,e=r%3,s=[],a=16383,f=0,u=r-e;f<u;f+=a)s.push(bt(n,f,f+a>u?u:f+a));return e===1?(t=n[r-1],s.push(j[t>>2]+j[t<<4&63]+"==")):e===2&&(t=(n[r-2]<<8)+n[r-1],s.push(j[t>>10]+j[t>>4&63]+j[t<<2&63]+"=")),s.join("")}var Le={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Le.read=function(n,t,r,e,s){var a,f,u=s*8-e-1,l=(1<<u)-1,d=l>>1,p=-7,v=r?s-1:0,y=r?-1:1,w=n[t+v];for(v+=y,a=w&(1<<-p)-1,w>>=-p,p+=u;p>0;a=a*256+n[t+v],v+=y,p-=8);for(f=a&(1<<-p)-1,a>>=-p,p+=e;p>0;f=f*256+n[t+v],v+=y,p-=8);if(a===0)a=1-d;else{if(a===l)return f?NaN:(w?-1:1)*(1/0);f=f+Math.pow(2,e),a=a-d}return(w?-1:1)*f*Math.pow(2,a-e)};Le.write=function(n,t,r,e,s,a){var f,u,l,d=a*8-s-1,p=(1<<d)-1,v=p>>1,y=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=e?0:a-1,U=e?1:-1,C=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,f=p):(f=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-f))<1&&(f--,l*=2),f+v>=1?t+=y/l:t+=y*Math.pow(2,1-v),t*l>=2&&(f++,l/=2),f+v>=p?(u=0,f=p):f+v>=1?(u=(t*l-1)*Math.pow(2,s),f=f+v):(u=t*Math.pow(2,v-1)*Math.pow(2,s),f=0));s>=8;n[r+w]=u&255,w+=U,u/=256,s-=8);for(f=f<<s|u,d+=s;d>0;n[r+w]=f&255,w+=U,f/=256,d-=8);n[r+w-U]|=C*128};var Ot={}.toString,Nt=Array.isArray||function(n){return Ot.call(n)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */(function(n){var t=Se,r=Le,e=Nt;n.Buffer=u,n.SlowBuffer=T,n.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=$e.TYPED_ARRAY_SUPPORT!==void 0?$e.TYPED_ARRAY_SUPPORT:s(),n.kMaxLength=a();function s(){try{var h=new Uint8Array(1);return h.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},h.foo()===42&&typeof h.subarray=="function"&&h.subarray(1,1).byteLength===0}catch{return!1}}function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(h,i){if(a()<i)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(h=new Uint8Array(i),h.__proto__=u.prototype):(h===null&&(h=new u(i)),h.length=i),h}function u(h,i,o){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(h,i,o);if(typeof h=="number"){if(typeof i=="string")throw new Error("If encoding is specified then the first argument must be a string");return v(this,h)}return l(this,h,i,o)}u.poolSize=8192,u._augment=function(h){return h.__proto__=u.prototype,h};function l(h,i,o,c){if(typeof i=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer?U(h,i,o,c):typeof i=="string"?y(h,i,o):C(h,i)}u.from=function(h,i,o){return l(null,h,i,o)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0}));function d(h){if(typeof h!="number")throw new TypeError('"size" argument must be a number');if(h<0)throw new RangeError('"size" argument must not be negative')}function p(h,i,o,c){return d(i),i<=0?f(h,i):o!==void 0?typeof c=="string"?f(h,i).fill(o,c):f(h,i).fill(o):f(h,i)}u.alloc=function(h,i,o){return p(null,h,i,o)};function v(h,i){if(d(i),h=f(h,i<0?0:x(i)|0),!u.TYPED_ARRAY_SUPPORT)for(var o=0;o<i;++o)h[o]=0;return h}u.allocUnsafe=function(h){return v(null,h)},u.allocUnsafeSlow=function(h){return v(null,h)};function y(h,i,o){if((typeof o!="string"||o==="")&&(o="utf8"),!u.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var c=P(i,o)|0;h=f(h,c);var g=h.write(i,o);return g!==c&&(h=h.slice(0,g)),h}function w(h,i){var o=i.length<0?0:x(i.length)|0;h=f(h,o);for(var c=0;c<o;c+=1)h[c]=i[c]&255;return h}function U(h,i,o,c){if(i.byteLength,o<0||i.byteLength<o)throw new RangeError("'offset' is out of bounds");if(i.byteLength<o+(c||0))throw new RangeError("'length' is out of bounds");return o===void 0&&c===void 0?i=new Uint8Array(i):c===void 0?i=new Uint8Array(i,o):i=new Uint8Array(i,o,c),u.TYPED_ARRAY_SUPPORT?(h=i,h.__proto__=u.prototype):h=w(h,i),h}function C(h,i){if(u.isBuffer(i)){var o=x(i.length)|0;return h=f(h,o),h.length===0||i.copy(h,0,0,o),h}if(i){if(typeof ArrayBuffer<"u"&&i.buffer instanceof ArrayBuffer||"length"in i)return typeof i.length!="number"||Dt(i.length)?f(h,0):w(h,i);if(i.type==="Buffer"&&e(i.data))return w(h,i.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function x(h){if(h>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return h|0}function T(h){return+h!=h&&(h=0),u.alloc(+h)}u.isBuffer=function(i){return!!(i!=null&&i._isBuffer)},u.compare=function(i,o){if(!u.isBuffer(i)||!u.isBuffer(o))throw new TypeError("Arguments must be Buffers");if(i===o)return 0;for(var c=i.length,g=o.length,m=0,S=Math.min(c,g);m<S;++m)if(i[m]!==o[m]){c=i[m],g=o[m];break}return c<g?-1:g<c?1:0},u.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(i,o){if(!e(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return u.alloc(0);var c;if(o===void 0)for(o=0,c=0;c<i.length;++c)o+=i[c].length;var g=u.allocUnsafe(o),m=0;for(c=0;c<i.length;++c){var S=i[c];if(!u.isBuffer(S))throw new TypeError('"list" argument must be an Array of Buffers');S.copy(g,m),m+=S.length}return g};function P(h,i){if(u.isBuffer(h))return h.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(h)||h instanceof ArrayBuffer))return h.byteLength;typeof h!="string"&&(h=""+h);var o=h.length;if(o===0)return 0;for(var c=!1;;)switch(i){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":case void 0:return de(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o*2;case"hex":return o>>>1;case"base64":return Ge(h).length;default:if(c)return de(h).length;i=(""+i).toLowerCase(),c=!0}}u.byteLength=P;function $(h,i,o){var c=!1;if((i===void 0||i<0)&&(i=0),i>this.length||((o===void 0||o>this.length)&&(o=this.length),o<=0)||(o>>>=0,i>>>=0,o<=i))return"";for(h||(h="utf8");;)switch(h){case"hex":return St(this,i,o);case"utf8":case"utf-8":return ue(this,i,o);case"ascii":return yt(this,i,o);case"latin1":case"binary":return mt(this,i,o);case"base64":return ee(this,i,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return wt(this,i,o);default:if(c)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),c=!0}}u.prototype._isBuffer=!0;function K(h,i,o){var c=h[i];h[i]=h[o],h[o]=c}u.prototype.swap16=function(){var i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var o=0;o<i;o+=2)K(this,o,o+1);return this},u.prototype.swap32=function(){var i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var o=0;o<i;o+=4)K(this,o,o+3),K(this,o+1,o+2);return this},u.prototype.swap64=function(){var i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var o=0;o<i;o+=8)K(this,o,o+7),K(this,o+1,o+6),K(this,o+2,o+5),K(this,o+3,o+4);return this},u.prototype.toString=function(){var i=this.length|0;return i===0?"":arguments.length===0?ue(this,0,i):$.apply(this,arguments)},u.prototype.equals=function(i){if(!u.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:u.compare(this,i)===0},u.prototype.inspect=function(){var i="",o=n.INSPECT_MAX_BYTES;return this.length>0&&(i=this.toString("hex",0,o).match(/.{2}/g).join(" "),this.length>o&&(i+=" ... ")),"<Buffer "+i+">"},u.prototype.compare=function(i,o,c,g,m){if(!u.isBuffer(i))throw new TypeError("Argument must be a Buffer");if(o===void 0&&(o=0),c===void 0&&(c=i?i.length:0),g===void 0&&(g=0),m===void 0&&(m=this.length),o<0||c>i.length||g<0||m>this.length)throw new RangeError("out of range index");if(g>=m&&o>=c)return 0;if(g>=m)return-1;if(o>=c)return 1;if(o>>>=0,c>>>=0,g>>>=0,m>>>=0,this===i)return 0;for(var S=m-g,E=c-o,D=Math.min(S,E),I=this.slice(g,m),B=i.slice(o,c),F=0;F<D;++F)if(I[F]!==B[F]){S=I[F],E=B[F];break}return S<E?-1:E<S?1:0};function W(h,i,o,c,g){if(h.length===0)return-1;if(typeof o=="string"?(c=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,isNaN(o)&&(o=g?0:h.length-1),o<0&&(o=h.length+o),o>=h.length){if(g)return-1;o=h.length-1}else if(o<0)if(g)o=0;else return-1;if(typeof i=="string"&&(i=u.from(i,c)),u.isBuffer(i))return i.length===0?-1:G(h,i,o,c,g);if(typeof i=="number")return i=i&255,u.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?g?Uint8Array.prototype.indexOf.call(h,i,o):Uint8Array.prototype.lastIndexOf.call(h,i,o):G(h,[i],o,c,g);throw new TypeError("val must be string, number or Buffer")}function G(h,i,o,c,g){var m=1,S=h.length,E=i.length;if(c!==void 0&&(c=String(c).toLowerCase(),c==="ucs2"||c==="ucs-2"||c==="utf16le"||c==="utf-16le")){if(h.length<2||i.length<2)return-1;m=2,S/=2,E/=2,o/=2}function D(Je,Ze){return m===1?Je[Ze]:Je.readUInt16BE(Ze*m)}var I;if(g){var B=-1;for(I=o;I<S;I++)if(D(h,I)===D(i,B===-1?0:I-B)){if(B===-1&&(B=I),I-B+1===E)return B*m}else B!==-1&&(I-=I-B),B=-1}else for(o+E>S&&(o=S-E),I=o;I>=0;I--){for(var F=!0,pe=0;pe<E;pe++)if(D(h,I+pe)!==D(i,pe)){F=!1;break}if(F)return I}return-1}u.prototype.includes=function(i,o,c){return this.indexOf(i,o,c)!==-1},u.prototype.indexOf=function(i,o,c){return W(this,i,o,c,!0)},u.prototype.lastIndexOf=function(i,o,c){return W(this,i,o,c,!1)};function ae(h,i,o,c){o=Number(o)||0;var g=h.length-o;c?(c=Number(c),c>g&&(c=g)):c=g;var m=i.length;if(m%2!==0)throw new TypeError("Invalid hex string");c>m/2&&(c=m/2);for(var S=0;S<c;++S){var E=parseInt(i.substr(S*2,2),16);if(isNaN(E))return S;h[o+S]=E}return S}function H(h,i,o,c){return ge(de(i,h.length-o),h,o,c)}function O(h,i,o,c){return ge(Tt(i),h,o,c)}function z(h,i,o,c){return O(h,i,o,c)}function X(h,i,o,c){return ge(Ge(i),h,o,c)}function Q(h,i,o,c){return ge(xt(i,h.length-o),h,o,c)}u.prototype.write=function(i,o,c,g){if(o===void 0)g="utf8",c=this.length,o=0;else if(c===void 0&&typeof o=="string")g=o,c=this.length,o=0;else if(isFinite(o))o=o|0,isFinite(c)?(c=c|0,g===void 0&&(g="utf8")):(g=c,c=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var m=this.length-o;if((c===void 0||c>m)&&(c=m),i.length>0&&(c<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");g||(g="utf8");for(var S=!1;;)switch(g){case"hex":return ae(this,i,o,c);case"utf8":case"utf-8":return H(this,i,o,c);case"ascii":return O(this,i,o,c);case"latin1":case"binary":return z(this,i,o,c);case"base64":return X(this,i,o,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,i,o,c);default:if(S)throw new TypeError("Unknown encoding: "+g);g=(""+g).toLowerCase(),S=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ee(h,i,o){return i===0&&o===h.length?t.fromByteArray(h):t.fromByteArray(h.slice(i,o))}function ue(h,i,o){o=Math.min(h.length,o);for(var c=[],g=i;g<o;){var m=h[g],S=null,E=m>239?4:m>223?3:m>191?2:1;if(g+E<=o){var D,I,B,F;switch(E){case 1:m<128&&(S=m);break;case 2:D=h[g+1],(D&192)===128&&(F=(m&31)<<6|D&63,F>127&&(S=F));break;case 3:D=h[g+1],I=h[g+2],(D&192)===128&&(I&192)===128&&(F=(m&15)<<12|(D&63)<<6|I&63,F>2047&&(F<55296||F>57343)&&(S=F));break;case 4:D=h[g+1],I=h[g+2],B=h[g+3],(D&192)===128&&(I&192)===128&&(B&192)===128&&(F=(m&15)<<18|(D&63)<<12|(I&63)<<6|B&63,F>65535&&F<1114112&&(S=F))}}S===null?(S=65533,E=1):S>65535&&(S-=65536,c.push(S>>>10&1023|55296),S=56320|S&1023),c.push(S),g+=E}return De(c)}var J=4096;function De(h){var i=h.length;if(i<=J)return String.fromCharCode.apply(String,h);for(var o="",c=0;c<i;)o+=String.fromCharCode.apply(String,h.slice(c,c+=J));return o}function yt(h,i,o){var c="";o=Math.min(h.length,o);for(var g=i;g<o;++g)c+=String.fromCharCode(h[g]&127);return c}function mt(h,i,o){var c="";o=Math.min(h.length,o);for(var g=i;g<o;++g)c+=String.fromCharCode(h[g]);return c}function St(h,i,o){var c=h.length;(!i||i<0)&&(i=0),(!o||o<0||o>c)&&(o=c);for(var g="",m=i;m<o;++m)g+=Et(h[m]);return g}function wt(h,i,o){for(var c=h.slice(i,o),g="",m=0;m<c.length;m+=2)g+=String.fromCharCode(c[m]+c[m+1]*256);return g}u.prototype.slice=function(i,o){var c=this.length;i=~~i,o=o===void 0?c:~~o,i<0?(i+=c,i<0&&(i=0)):i>c&&(i=c),o<0?(o+=c,o<0&&(o=0)):o>c&&(o=c),o<i&&(o=i);var g;if(u.TYPED_ARRAY_SUPPORT)g=this.subarray(i,o),g.__proto__=u.prototype;else{var m=o-i;g=new u(m,void 0);for(var S=0;S<m;++S)g[S]=this[S+i]}return g};function R(h,i,o){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+i>o)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUIntLE=function(i,o,c){i=i|0,o=o|0,c||R(i,o,this.length);for(var g=this[i],m=1,S=0;++S<o&&(m*=256);)g+=this[i+S]*m;return g},u.prototype.readUIntBE=function(i,o,c){i=i|0,o=o|0,c||R(i,o,this.length);for(var g=this[i+--o],m=1;o>0&&(m*=256);)g+=this[i+--o]*m;return g},u.prototype.readUInt8=function(i,o){return o||R(i,1,this.length),this[i]},u.prototype.readUInt16LE=function(i,o){return o||R(i,2,this.length),this[i]|this[i+1]<<8},u.prototype.readUInt16BE=function(i,o){return o||R(i,2,this.length),this[i]<<8|this[i+1]},u.prototype.readUInt32LE=function(i,o){return o||R(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},u.prototype.readUInt32BE=function(i,o){return o||R(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},u.prototype.readIntLE=function(i,o,c){i=i|0,o=o|0,c||R(i,o,this.length);for(var g=this[i],m=1,S=0;++S<o&&(m*=256);)g+=this[i+S]*m;return m*=128,g>=m&&(g-=Math.pow(2,8*o)),g},u.prototype.readIntBE=function(i,o,c){i=i|0,o=o|0,c||R(i,o,this.length);for(var g=o,m=1,S=this[i+--g];g>0&&(m*=256);)S+=this[i+--g]*m;return m*=128,S>=m&&(S-=Math.pow(2,8*o)),S},u.prototype.readInt8=function(i,o){return o||R(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},u.prototype.readInt16LE=function(i,o){o||R(i,2,this.length);var c=this[i]|this[i+1]<<8;return c&32768?c|4294901760:c},u.prototype.readInt16BE=function(i,o){o||R(i,2,this.length);var c=this[i+1]|this[i]<<8;return c&32768?c|4294901760:c},u.prototype.readInt32LE=function(i,o){return o||R(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},u.prototype.readInt32BE=function(i,o){return o||R(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},u.prototype.readFloatLE=function(i,o){return o||R(i,4,this.length),r.read(this,i,!0,23,4)},u.prototype.readFloatBE=function(i,o){return o||R(i,4,this.length),r.read(this,i,!1,23,4)},u.prototype.readDoubleLE=function(i,o){return o||R(i,8,this.length),r.read(this,i,!0,52,8)},u.prototype.readDoubleBE=function(i,o){return o||R(i,8,this.length),r.read(this,i,!1,52,8)};function M(h,i,o,c,g,m){if(!u.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>g||i<m)throw new RangeError('"value" argument is out of bounds');if(o+c>h.length)throw new RangeError("Index out of range")}u.prototype.writeUIntLE=function(i,o,c,g){if(i=+i,o=o|0,c=c|0,!g){var m=Math.pow(2,8*c)-1;M(this,i,o,c,m,0)}var S=1,E=0;for(this[o]=i&255;++E<c&&(S*=256);)this[o+E]=i/S&255;return o+c},u.prototype.writeUIntBE=function(i,o,c,g){if(i=+i,o=o|0,c=c|0,!g){var m=Math.pow(2,8*c)-1;M(this,i,o,c,m,0)}var S=c-1,E=1;for(this[o+S]=i&255;--S>=0&&(E*=256);)this[o+S]=i/E&255;return o+c},u.prototype.writeUInt8=function(i,o,c){return i=+i,o=o|0,c||M(this,i,o,1,255,0),u.TYPED_ARRAY_SUPPORT||(i=Math.floor(i)),this[o]=i&255,o+1};function ce(h,i,o,c){i<0&&(i=65535+i+1);for(var g=0,m=Math.min(h.length-o,2);g<m;++g)h[o+g]=(i&255<<8*(c?g:1-g))>>>(c?g:1-g)*8}u.prototype.writeUInt16LE=function(i,o,c){return i=+i,o=o|0,c||M(this,i,o,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[o]=i&255,this[o+1]=i>>>8):ce(this,i,o,!0),o+2},u.prototype.writeUInt16BE=function(i,o,c){return i=+i,o=o|0,c||M(this,i,o,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[o]=i>>>8,this[o+1]=i&255):ce(this,i,o,!1),o+2};function le(h,i,o,c){i<0&&(i=4294967295+i+1);for(var g=0,m=Math.min(h.length-o,4);g<m;++g)h[o+g]=i>>>(c?g:3-g)*8&255}u.prototype.writeUInt32LE=function(i,o,c){return i=+i,o=o|0,c||M(this,i,o,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[o+3]=i>>>24,this[o+2]=i>>>16,this[o+1]=i>>>8,this[o]=i&255):le(this,i,o,!0),o+4},u.prototype.writeUInt32BE=function(i,o,c){return i=+i,o=o|0,c||M(this,i,o,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=i&255):le(this,i,o,!1),o+4},u.prototype.writeIntLE=function(i,o,c,g){if(i=+i,o=o|0,!g){var m=Math.pow(2,8*c-1);M(this,i,o,c,m-1,-m)}var S=0,E=1,D=0;for(this[o]=i&255;++S<c&&(E*=256);)i<0&&D===0&&this[o+S-1]!==0&&(D=1),this[o+S]=(i/E>>0)-D&255;return o+c},u.prototype.writeIntBE=function(i,o,c,g){if(i=+i,o=o|0,!g){var m=Math.pow(2,8*c-1);M(this,i,o,c,m-1,-m)}var S=c-1,E=1,D=0;for(this[o+S]=i&255;--S>=0&&(E*=256);)i<0&&D===0&&this[o+S+1]!==0&&(D=1),this[o+S]=(i/E>>0)-D&255;return o+c},u.prototype.writeInt8=function(i,o,c){return i=+i,o=o|0,c||M(this,i,o,1,127,-128),u.TYPED_ARRAY_SUPPORT||(i=Math.floor(i)),i<0&&(i=255+i+1),this[o]=i&255,o+1},u.prototype.writeInt16LE=function(i,o,c){return i=+i,o=o|0,c||M(this,i,o,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[o]=i&255,this[o+1]=i>>>8):ce(this,i,o,!0),o+2},u.prototype.writeInt16BE=function(i,o,c){return i=+i,o=o|0,c||M(this,i,o,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[o]=i>>>8,this[o+1]=i&255):ce(this,i,o,!1),o+2},u.prototype.writeInt32LE=function(i,o,c){return i=+i,o=o|0,c||M(this,i,o,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[o]=i&255,this[o+1]=i>>>8,this[o+2]=i>>>16,this[o+3]=i>>>24):le(this,i,o,!0),o+4},u.prototype.writeInt32BE=function(i,o,c){return i=+i,o=o|0,c||M(this,i,o,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),u.TYPED_ARRAY_SUPPORT?(this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=i&255):le(this,i,o,!1),o+4};function je(h,i,o,c,g,m){if(o+c>h.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function Ye(h,i,o,c,g){return g||je(h,i,o,4),r.write(h,i,o,c,23,4),o+4}u.prototype.writeFloatLE=function(i,o,c){return Ye(this,i,o,!0,c)},u.prototype.writeFloatBE=function(i,o,c){return Ye(this,i,o,!1,c)};function We(h,i,o,c,g){return g||je(h,i,o,8),r.write(h,i,o,c,52,8),o+8}u.prototype.writeDoubleLE=function(i,o,c){return We(this,i,o,!0,c)},u.prototype.writeDoubleBE=function(i,o,c){return We(this,i,o,!1,c)},u.prototype.copy=function(i,o,c,g){if(c||(c=0),!g&&g!==0&&(g=this.length),o>=i.length&&(o=i.length),o||(o=0),g>0&&g<c&&(g=c),g===c||i.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("sourceStart out of bounds");if(g<0)throw new RangeError("sourceEnd out of bounds");g>this.length&&(g=this.length),i.length-o<g-c&&(g=i.length-o+c);var m=g-c,S;if(this===i&&c<o&&o<g)for(S=m-1;S>=0;--S)i[S+o]=this[S+c];else if(m<1e3||!u.TYPED_ARRAY_SUPPORT)for(S=0;S<m;++S)i[S+o]=this[S+c];else Uint8Array.prototype.set.call(i,this.subarray(c,c+m),o);return m},u.prototype.fill=function(i,o,c,g){if(typeof i=="string"){if(typeof o=="string"?(g=o,o=0,c=this.length):typeof c=="string"&&(g=c,c=this.length),i.length===1){var m=i.charCodeAt(0);m<256&&(i=m)}if(g!==void 0&&typeof g!="string")throw new TypeError("encoding must be a string");if(typeof g=="string"&&!u.isEncoding(g))throw new TypeError("Unknown encoding: "+g)}else typeof i=="number"&&(i=i&255);if(o<0||this.length<o||this.length<c)throw new RangeError("Out of range index");if(c<=o)return this;o=o>>>0,c=c===void 0?this.length:c>>>0,i||(i=0);var S;if(typeof i=="number")for(S=o;S<c;++S)this[S]=i;else{var E=u.isBuffer(i)?i:de(new u(i,g).toString()),D=E.length;for(S=0;S<c-o;++S)this[S+o]=E[S%D]}return this};var At=/[^+\/0-9A-Za-z-_]/g;function Ct(h){if(h=Ut(h).replace(At,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function Ut(h){return h.trim?h.trim():h.replace(/^\s+|\s+$/g,"")}function Et(h){return h<16?"0"+h.toString(16):h.toString(16)}function de(h,i){i=i||1/0;for(var o,c=h.length,g=null,m=[],S=0;S<c;++S){if(o=h.charCodeAt(S),o>55295&&o<57344){if(!g){if(o>56319){(i-=3)>-1&&m.push(239,191,189);continue}else if(S+1===c){(i-=3)>-1&&m.push(239,191,189);continue}g=o;continue}if(o<56320){(i-=3)>-1&&m.push(239,191,189),g=o;continue}o=(g-55296<<10|o-56320)+65536}else g&&(i-=3)>-1&&m.push(239,191,189);if(g=null,o<128){if((i-=1)<0)break;m.push(o)}else if(o<2048){if((i-=2)<0)break;m.push(o>>6|192,o&63|128)}else if(o<65536){if((i-=3)<0)break;m.push(o>>12|224,o>>6&63|128,o&63|128)}else if(o<1114112){if((i-=4)<0)break;m.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else throw new Error("Invalid code point")}return m}function Tt(h){for(var i=[],o=0;o<h.length;++o)i.push(h.charCodeAt(o)&255);return i}function xt(h,i){for(var o,c,g,m=[],S=0;S<h.length&&!((i-=2)<0);++S)o=h.charCodeAt(S),c=o>>8,g=o%256,m.push(g),m.push(c);return m}function Ge(h){return t.toByteArray(Ct(h))}function ge(h,i,o,c){for(var g=0;g<c&&!(g+o>=i.length||g>=h.length);++g)i[g+o]=h[g];return g}function Dt(h){return h!==h}})(_);var V;typeof window<"u"&&window.crypto&&(V=window.crypto);!V&&typeof window<"u"&&window.msCrypto&&(V=window.msCrypto);!V&&typeof global<"u"&&global.crypto&&(V=global.crypto);if(!V&&typeof require=="function")try{V=require("crypto")}catch{}function Kt(){if(V){if(typeof V.getRandomValues=="function")try{return V.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof V.randomBytes=="function")try{return V.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")}function kt(n){for(var t=n.words,r=n.sigBytes,e=[],s=0;s<r;s++){var a=t[s>>>2]>>>24-s%4*8&255;e.push((a>>>4).toString(16)),e.push((a&15).toString(16))}return e.join("")}var Lt=function(){function n(r,e){r=this.words=r||[],e!=null?this.sigBytes=e:this.sigBytes=r.length*4}var t=n.prototype;return t.random=function(e){for(var s=[],a=0;a<e;a+=4)s.push(Kt());return new n(s,e)},t.toString=function(){return kt(this)},n}(),ie={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Fe=function(n,t){return Fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var s in e)e.hasOwnProperty(s)&&(r[s]=e[s])},Fe(n,t)};function Vt(n,t){Fe(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Re=function(){return Re=Object.assign||function(t){for(var r,e=1,s=arguments.length;e<s;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Re.apply(this,arguments)};function qt(n,t){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(r[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,e=Object.getOwnPropertySymbols(n);s<e.length;s++)t.indexOf(e[s])<0&&Object.prototype.propertyIsEnumerable.call(n,e[s])&&(r[e[s]]=n[e[s]]);return r}function Ht(n,t,r,e){var s=arguments.length,a=s<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,r):e,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,r,e);else for(var u=n.length-1;u>=0;u--)(f=n[u])&&(a=(s<3?f(a):s>3?f(t,r,a):f(t,r))||a);return s>3&&a&&Object.defineProperty(t,r,a),a}function jt(n,t){return function(r,e){t(r,e,n)}}function Yt(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)}function Wt(n,t,r,e){function s(a){return a instanceof r?a:new r(function(f){f(a)})}return new(r||(r=Promise))(function(a,f){function u(p){try{d(e.next(p))}catch(v){f(v)}}function l(p){try{d(e.throw(p))}catch(v){f(v)}}function d(p){p.done?a(p.value):s(p.value).then(u,l)}d((e=e.apply(n,t||[])).next())})}function Gt(n,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},e,s,a,f;return f={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function u(d){return function(p){return l([d,p])}}function l(d){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,s&&(a=d[0]&2?s.return:d[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,d[1])).done)return a;switch(s=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(n,r)}catch(p){d=[6,p],s=0}finally{e=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Jt(n,t,r,e){e===void 0&&(e=r),n[e]=t[r]}function Zt(n,t){for(var r in n)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=n[r])}function Pe(n){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&n[t],e=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&e>=n.length&&(n=void 0),{value:n&&n[e++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ht(n,t){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var e=r.call(n),s,a=[],f;try{for(;(t===void 0||t-- >0)&&!(s=e.next()).done;)a.push(s.value)}catch(u){f={error:u}}finally{try{s&&!s.done&&(r=e.return)&&r.call(e)}finally{if(f)throw f.error}}return a}function $t(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(ht(arguments[t]));return n}function zt(){for(var n=0,t=0,r=arguments.length;t<r;t++)n+=arguments[t].length;for(var e=Array(n),s=0,t=0;t<r;t++)for(var a=arguments[t],f=0,u=a.length;f<u;f++,s++)e[s]=a[f];return e}function fe(n){return this instanceof fe?(this.v=n,this):new fe(n)}function Xt(n,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r.apply(n,t||[]),s,a=[];return s={},f("next"),f("throw"),f("return"),s[Symbol.asyncIterator]=function(){return this},s;function f(y){e[y]&&(s[y]=function(w){return new Promise(function(U,C){a.push([y,w,U,C])>1||u(y,w)})})}function u(y,w){try{l(e[y](w))}catch(U){v(a[0][3],U)}}function l(y){y.value instanceof fe?Promise.resolve(y.value.v).then(d,p):v(a[0][2],y)}function d(y){u("next",y)}function p(y){u("throw",y)}function v(y,w){y(w),a.shift(),a.length&&u(a[0][0],a[0][1])}}function Qt(n){var t,r;return t={},e("next"),e("throw",function(s){throw s}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(s,a){t[s]=n[s]?function(f){return(r=!r)?{value:fe(n[s](f)),done:s==="return"}:a?a(f):f}:a}}function er(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],r;return t?t.call(n):(n=typeof Pe=="function"?Pe(n):n[Symbol.iterator](),r={},e("next"),e("throw"),e("return"),r[Symbol.asyncIterator]=function(){return this},r);function e(a){r[a]=n[a]&&function(f){return new Promise(function(u,l){f=n[a](f),s(u,l,f.done,f.value)})}}function s(a,f,u,l){Promise.resolve(l).then(function(d){a({value:d,done:u})},f)}}function tr(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}function rr(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var r in n)Object.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t.default=n,t}function nr(n){return n&&n.__esModule?n:{default:n}}function ir(n,t){if(!t.has(n))throw new TypeError("attempted to get private field on non-instance");return t.get(n)}function sr(n,t,r){if(!t.has(n))throw new TypeError("attempted to set private field on non-instance");return t.set(n,r),r}const or=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Re},__asyncDelegator:Qt,__asyncGenerator:Xt,__asyncValues:er,__await:fe,__awaiter:Wt,__classPrivateFieldGet:ir,__classPrivateFieldSet:sr,__createBinding:Jt,__decorate:Ht,__exportStar:Zt,__extends:Vt,__generator:Gt,__importDefault:nr,__importStar:rr,__makeTemplateObject:tr,__metadata:Yt,__param:jt,__read:ht,__rest:qt,__spread:$t,__spreadArrays:zt,__values:Pe},Symbol.toStringTag,{value:"Module"})),ct=ke(or);var we={},N={};Object.defineProperty(N,"__esModule",{value:!0});N.MAX_HASHABLE_LENGTH=N.INIT=N.KEY=N.DIGEST_LENGTH=N.BLOCK_SIZE=void 0;N.BLOCK_SIZE=64;N.DIGEST_LENGTH=32;N.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);N.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];N.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1;var Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.RawSha256=void 0;var k=N,ar=function(){function n(){this.state=Int32Array.from(k.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return n.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,e=t.byteLength;if(this.bytesHashed+=e,this.bytesHashed*8>k.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;e>0;)this.buffer[this.bufferLength++]=t[r++],e--,this.bufferLength===k.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},n.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),e=this.bufferLength;if(r.setUint8(this.bufferLength++,128),e%k.BLOCK_SIZE>=k.BLOCK_SIZE-8){for(var s=this.bufferLength;s<k.BLOCK_SIZE;s++)r.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(var s=this.bufferLength;s<k.BLOCK_SIZE-8;s++)r.setUint8(s,0);r.setUint32(k.BLOCK_SIZE-8,Math.floor(t/4294967296),!0),r.setUint32(k.BLOCK_SIZE-4,t),this.hashBuffer(),this.finished=!0}for(var a=new Uint8Array(k.DIGEST_LENGTH),s=0;s<8;s++)a[s*4]=this.state[s]>>>24&255,a[s*4+1]=this.state[s]>>>16&255,a[s*4+2]=this.state[s]>>>8&255,a[s*4+3]=this.state[s]>>>0&255;return a},n.prototype.hashBuffer=function(){for(var t=this,r=t.buffer,e=t.state,s=e[0],a=e[1],f=e[2],u=e[3],l=e[4],d=e[5],p=e[6],v=e[7],y=0;y<k.BLOCK_SIZE;y++){if(y<16)this.temp[y]=(r[y*4]&255)<<24|(r[y*4+1]&255)<<16|(r[y*4+2]&255)<<8|r[y*4+3]&255;else{var w=this.temp[y-2],U=(w>>>17|w<<15)^(w>>>19|w<<13)^w>>>10;w=this.temp[y-15];var C=(w>>>7|w<<25)^(w>>>18|w<<14)^w>>>3;this.temp[y]=(U+this.temp[y-7]|0)+(C+this.temp[y-16]|0)}var x=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&d^~l&p)|0)+(v+(k.KEY[y]+this.temp[y]|0)|0)|0,T=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&a^s&f^a&f)|0;v=p,p=d,d=l,l=u+x|0,u=f,f=a,a=s,s=x+T|0}e[0]+=s,e[1]+=a,e[2]+=f,e[3]+=u,e[4]+=l,e[5]+=d,e[6]+=p,e[7]+=v},n}();Ae.RawSha256=ar;var lt={},Ce={};const ur=n=>{const t=[];for(let r=0,e=n.length;r<e;r++){const s=n.charCodeAt(r);if(s<128)t.push(s);else if(s<2048)t.push(s>>6|192,s&63|128);else if(r+1<n.length&&(s&64512)===55296&&(n.charCodeAt(r+1)&64512)===56320){const a=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023);t.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else t.push(s>>12|224,s>>6&63|128,s&63|128)}return Uint8Array.from(t)},fr=n=>{let t="";for(let r=0,e=n.length;r<e;r++){const s=n[r];if(s<128)t+=String.fromCharCode(s);else if(192<=s&&s<224){const a=n[++r];t+=String.fromCharCode((s&31)<<6|a&63)}else if(240<=s&&s<365){const f="%"+[s,n[++r],n[++r],n[++r]].map(u=>u.toString(16)).join("%");t+=decodeURIComponent(f)}else t+=String.fromCharCode((s&15)<<12|(n[++r]&63)<<6|n[++r]&63)}return t};function hr(n){return new TextEncoder().encode(n)}function cr(n){return new TextDecoder("utf-8").decode(n)}const lr=n=>typeof TextEncoder=="function"?hr(n):ur(n),dr=n=>typeof TextDecoder=="function"?cr(n):fr(n),gr=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:lr,toUtf8:dr},Symbol.toStringTag,{value:"Module"})),pr=ke(gr);Object.defineProperty(Ce,"__esModule",{value:!0});Ce.convertToBuffer=void 0;var vr=pr,yr=typeof Buffer<"u"&&Buffer.from?function(n){return Buffer.from(n,"utf8")}:vr.fromUtf8;function mr(n){return n instanceof Uint8Array?n:typeof n=="string"?yr(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n)}Ce.convertToBuffer=mr;var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.isEmptyData=void 0;function Sr(n){return typeof n=="string"?n.length===0:n.byteLength===0}Ue.isEmptyData=Sr;var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.numToUint8=void 0;function wr(n){return new Uint8Array([(n&4278190080)>>24,(n&16711680)>>16,(n&65280)>>8,n&255])}Ee.numToUint8=wr;var Te={};Object.defineProperty(Te,"__esModule",{value:!0});Te.uint32ArrayFrom=void 0;function Ar(n){if(!Array.from){for(var t=new Uint32Array(n.length),r=0;r<n.length;)t[r]=n[r];return t}return Uint32Array.from(n)}Te.uint32ArrayFrom=Ar;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.uint32ArrayFrom=n.numToUint8=n.isEmptyData=n.convertToBuffer=void 0;var t=Ce;Object.defineProperty(n,"convertToBuffer",{enumerable:!0,get:function(){return t.convertToBuffer}});var r=Ue;Object.defineProperty(n,"isEmptyData",{enumerable:!0,get:function(){return r.isEmptyData}});var e=Ee;Object.defineProperty(n,"numToUint8",{enumerable:!0,get:function(){return e.numToUint8}});var s=Te;Object.defineProperty(n,"uint32ArrayFrom",{enumerable:!0,get:function(){return s.uint32ArrayFrom}})})(lt);Object.defineProperty(we,"__esModule",{value:!0});we.Sha256=void 0;var ze=ct,me=N,Be=Ae,be=lt,Cr=function(){function n(t){if(this.hash=new Be.RawSha256,t){this.outer=new Be.RawSha256;var r=Ur(t),e=new Uint8Array(me.BLOCK_SIZE);e.set(r);for(var s=0;s<me.BLOCK_SIZE;s++)r[s]^=54,e[s]^=92;this.hash.update(r),this.outer.update(e);for(var s=0;s<r.byteLength;s++)r[s]=0}}return n.prototype.update=function(t){if(!((0,be.isEmptyData)(t)||this.error))try{this.hash.update((0,be.convertToBuffer)(t))}catch(r){this.error=r}},n.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},n.prototype.digest=function(){return(0,ze.__awaiter)(this,void 0,void 0,function(){return(0,ze.__generator)(this,function(t){return[2,this.digestSync()]})})},n}();we.Sha256=Cr;function Ur(n){var t=(0,be.convertToBuffer)(n);if(t.byteLength>me.BLOCK_SIZE){var r=new Be.RawSha256;r.update(t),t=r.digest()}var e=new Uint8Array(me.BLOCK_SIZE);return e.set(t),e}(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=ct;(0,t.__exportStar)(we,n)})(ie);function A(n,t){n!=null&&this.fromString(n,t)}function b(){return new A(null)}var Y,Er=0xdeadbeefcafe,Xe=(Er&16777215)==15715070;function Tr(n,t,r,e,s,a){for(;--a>=0;){var f=t*this[n++]+r[e]+s;s=Math.floor(f/67108864),r[e++]=f&67108863}return s}function xr(n,t,r,e,s,a){for(var f=t&32767,u=t>>15;--a>=0;){var l=this[n]&32767,d=this[n++]>>15,p=u*l+d*f;l=f*l+((p&32767)<<15)+r[e]+(s&1073741823),s=(l>>>30)+(p>>>15)+u*d+(s>>>30),r[e++]=l&1073741823}return s}function Dr(n,t,r,e,s,a){for(var f=t&16383,u=t>>14;--a>=0;){var l=this[n]&16383,d=this[n++]>>14,p=u*l+d*f;l=f*l+((p&16383)<<14)+r[e]+s,s=(l>>28)+(p>>14)+u*d,r[e++]=l&268435455}return s}var Qe=typeof navigator<"u";Qe&&Xe&&navigator.appName=="Microsoft Internet Explorer"?(A.prototype.am=xr,Y=30):Qe&&Xe&&navigator.appName!="Netscape"?(A.prototype.am=Tr,Y=26):(A.prototype.am=Dr,Y=28);A.prototype.DB=Y;A.prototype.DM=(1<<Y)-1;A.prototype.DV=1<<Y;var Ve=52;A.prototype.FV=Math.pow(2,Ve);A.prototype.F1=Ve-Y;A.prototype.F2=2*Y-Ve;var _r="0123456789abcdefghijklmnopqrstuvwxyz",xe=new Array,se,q;se="0".charCodeAt(0);for(q=0;q<=9;++q)xe[se++]=q;se="a".charCodeAt(0);for(q=10;q<36;++q)xe[se++]=q;se="A".charCodeAt(0);for(q=10;q<36;++q)xe[se++]=q;function et(n){return _r.charAt(n)}function Ir(n,t){var r=xe[n.charCodeAt(t)];return r??-1}function Fr(n){for(var t=this.t-1;t>=0;--t)n[t]=this[t];n.t=this.t,n.s=this.s}function Rr(n){this.t=1,this.s=n<0?-1:0,n>0?this[0]=n:n<-1?this[0]=n+this.DV:this.t=0}function qe(n){var t=b();return t.fromInt(n),t}function Pr(n,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;for(var e=n.length,s=!1,a=0;--e>=0;){var f=Ir(n,e);if(f<0){n.charAt(e)=="-"&&(s=!0);continue}s=!1,a==0?this[this.t++]=f:a+r>this.DB?(this[this.t-1]|=(f&(1<<this.DB-a)-1)<<a,this[this.t++]=f>>this.DB-a):this[this.t-1]|=f<<a,a+=r,a>=this.DB&&(a-=this.DB)}this.clamp(),s&&A.ZERO.subTo(this,this)}function Br(){for(var n=this.s&this.DM;this.t>0&&this[this.t-1]==n;)--this.t}function br(n){if(this.s<0)return"-"+this.negate().toString(n);var t;if(n==16)t=4;else if(n==8)t=3;else if(n==2)t=1;else if(n==32)t=5;else if(n==4)t=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");var r=(1<<t)-1,e,s=!1,a="",f=this.t,u=this.DB-f*this.DB%t;if(f-- >0)for(u<this.DB&&(e=this[f]>>u)>0&&(s=!0,a=et(e));f>=0;)u<t?(e=(this[f]&(1<<u)-1)<<t-u,e|=this[--f]>>(u+=this.DB-t)):(e=this[f]>>(u-=t)&r,u<=0&&(u+=this.DB,--f)),e>0&&(s=!0),s&&(a+=et(e));return s?a:"0"}function Mr(){var n=b();return A.ZERO.subTo(this,n),n}function Or(){return this.s<0?this.negate():this}function Nr(n){var t=this.s-n.s;if(t!=0)return t;var r=this.t;if(t=r-n.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this[r]-n[r])!=0)return t;return 0}function He(n){var t=1,r;return(r=n>>>16)!=0&&(n=r,t+=16),(r=n>>8)!=0&&(n=r,t+=8),(r=n>>4)!=0&&(n=r,t+=4),(r=n>>2)!=0&&(n=r,t+=2),(r=n>>1)!=0&&(n=r,t+=1),t}function Kr(){return this.t<=0?0:this.DB*(this.t-1)+He(this[this.t-1]^this.s&this.DM)}function kr(n,t){var r;for(r=this.t-1;r>=0;--r)t[r+n]=this[r];for(r=n-1;r>=0;--r)t[r]=0;t.t=this.t+n,t.s=this.s}function Lr(n,t){for(var r=n;r<this.t;++r)t[r-n]=this[r];t.t=Math.max(this.t-n,0),t.s=this.s}function Vr(n,t){var r=n%this.DB,e=this.DB-r,s=(1<<e)-1,a=Math.floor(n/this.DB),f=this.s<<r&this.DM,u;for(u=this.t-1;u>=0;--u)t[u+a+1]=this[u]>>e|f,f=(this[u]&s)<<r;for(u=a-1;u>=0;--u)t[u]=0;t[a]=f,t.t=this.t+a+1,t.s=this.s,t.clamp()}function qr(n,t){t.s=this.s;var r=Math.floor(n/this.DB);if(r>=this.t){t.t=0;return}var e=n%this.DB,s=this.DB-e,a=(1<<e)-1;t[0]=this[r]>>e;for(var f=r+1;f<this.t;++f)t[f-r-1]|=(this[f]&a)<<s,t[f-r]=this[f]>>e;e>0&&(t[this.t-r-1]|=(this.s&a)<<s),t.t=this.t-r,t.clamp()}function Hr(n,t){for(var r=0,e=0,s=Math.min(n.t,this.t);r<s;)e+=this[r]-n[r],t[r++]=e&this.DM,e>>=this.DB;if(n.t<this.t){for(e-=n.s;r<this.t;)e+=this[r],t[r++]=e&this.DM,e>>=this.DB;e+=this.s}else{for(e+=this.s;r<n.t;)e-=n[r],t[r++]=e&this.DM,e>>=this.DB;e-=n.s}t.s=e<0?-1:0,e<-1?t[r++]=this.DV+e:e>0&&(t[r++]=e),t.t=r,t.clamp()}function jr(n,t){var r=this.abs(),e=n.abs(),s=r.t;for(t.t=s+e.t;--s>=0;)t[s]=0;for(s=0;s<e.t;++s)t[s+r.t]=r.am(0,e[s],t,s,0,r.t);t.s=0,t.clamp(),this.s!=n.s&&A.ZERO.subTo(t,t)}function Yr(n){for(var t=this.abs(),r=n.t=2*t.t;--r>=0;)n[r]=0;for(r=0;r<t.t-1;++r){var e=t.am(r,t[r],n,2*r,0,1);(n[r+t.t]+=t.am(r+1,2*t[r],n,2*r+1,e,t.t-r-1))>=t.DV&&(n[r+t.t]-=t.DV,n[r+t.t+1]=1)}n.t>0&&(n[n.t-1]+=t.am(r,t[r],n,2*r,0,1)),n.s=0,n.clamp()}function Wr(n,t,r){var e=n.abs();if(!(e.t<=0)){var s=this.abs();if(s.t<e.t){t!=null&&t.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=b());var a=b(),f=this.s,u=n.s,l=this.DB-He(e[e.t-1]);l>0?(e.lShiftTo(l,a),s.lShiftTo(l,r)):(e.copyTo(a),s.copyTo(r));var d=a.t,p=a[d-1];if(p!=0){var v=p*(1<<this.F1)+(d>1?a[d-2]>>this.F2:0),y=this.FV/v,w=(1<<this.F1)/v,U=1<<this.F2,C=r.t,x=C-d,T=t??b();for(a.dlShiftTo(x,T),r.compareTo(T)>=0&&(r[r.t++]=1,r.subTo(T,r)),A.ONE.dlShiftTo(d,T),T.subTo(a,a);a.t<d;)a[a.t++]=0;for(;--x>=0;){var P=r[--C]==p?this.DM:Math.floor(r[C]*y+(r[C-1]+U)*w);if((r[C]+=a.am(0,P,r,x,0,d))<P)for(a.dlShiftTo(x,T),r.subTo(T,r);r[C]<--P;)r.subTo(T,r)}t!=null&&(r.drShiftTo(d,t),f!=u&&A.ZERO.subTo(t,t)),r.t=d,r.clamp(),l>0&&r.rShiftTo(l,r),f<0&&A.ZERO.subTo(r,r)}}}function Gr(n){var t=b();return this.abs().divRemTo(n,null,t),this.s<0&&t.compareTo(A.ZERO)>0&&n.subTo(t,t),t}function Jr(){if(this.t<1)return 0;var n=this[0];if(!(n&1))return 0;var t=n&3;return t=t*(2-(n&15)*t)&15,t=t*(2-(n&255)*t)&255,t=t*(2-((n&65535)*t&65535))&65535,t=t*(2-n*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Zr(n){return this.compareTo(n)==0}function $r(n,t){for(var r=0,e=0,s=Math.min(n.t,this.t);r<s;)e+=this[r]+n[r],t[r++]=e&this.DM,e>>=this.DB;if(n.t<this.t){for(e+=n.s;r<this.t;)e+=this[r],t[r++]=e&this.DM,e>>=this.DB;e+=this.s}else{for(e+=this.s;r<n.t;)e+=n[r],t[r++]=e&this.DM,e>>=this.DB;e+=n.s}t.s=e<0?-1:0,e>0?t[r++]=e:e<-1&&(t[r++]=this.DV+e),t.t=r,t.clamp()}function zr(n){var t=b();return this.addTo(n,t),t}function Xr(n){var t=b();return this.subTo(n,t),t}function Qr(n){var t=b();return this.multiplyTo(n,t),t}function en(n){var t=b();return this.divRemTo(n,t,null),t}function oe(n){this.m=n,this.mp=n.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<n.DB-15)-1,this.mt2=2*n.t}function tn(n){var t=b();return n.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),n.s<0&&t.compareTo(A.ZERO)>0&&this.m.subTo(t,t),t}function rn(n){var t=b();return n.copyTo(t),this.reduce(t),t}function nn(n){for(;n.t<=this.mt2;)n[n.t++]=0;for(var t=0;t<this.m.t;++t){var r=n[t]&32767,e=r*this.mpl+((r*this.mph+(n[t]>>15)*this.mpl&this.um)<<15)&n.DM;for(r=t+this.m.t,n[r]+=this.m.am(0,e,n,t,0,this.m.t);n[r]>=n.DV;)n[r]-=n.DV,n[++r]++}n.clamp(),n.drShiftTo(this.m.t,n),n.compareTo(this.m)>=0&&n.subTo(this.m,n)}function sn(n,t){n.squareTo(t),this.reduce(t)}function on(n,t,r){n.multiplyTo(t,r),this.reduce(r)}oe.prototype.convert=tn;oe.prototype.revert=rn;oe.prototype.reduce=nn;oe.prototype.mulTo=on;oe.prototype.sqrTo=sn;function an(n,t,r){var e=n.bitLength(),s,a=qe(1),f=new oe(t);if(e<=0)return a;e<18?s=1:e<48?s=3:e<144?s=4:e<768?s=5:s=6;var u=new Array,l=3,d=s-1,p=(1<<s)-1;if(u[1]=f.convert(this),s>1){var v=b();for(f.sqrTo(u[1],v);l<=p;)u[l]=b(),f.mulTo(v,u[l-2],u[l]),l+=2}var y=n.t-1,w,U=!0,C=b(),x;for(e=He(n[y])-1;y>=0;){for(e>=d?w=n[y]>>e-d&p:(w=(n[y]&(1<<e+1)-1)<<d-e,y>0&&(w|=n[y-1]>>this.DB+e-d)),l=s;!(w&1);)w>>=1,--l;if((e-=l)<0&&(e+=this.DB,--y),U)u[w].copyTo(a),U=!1;else{for(;l>1;)f.sqrTo(a,C),f.sqrTo(C,a),l-=2;l>0?f.sqrTo(a,C):(x=a,a=C,C=x),f.mulTo(C,u[w],a)}for(;y>=0&&!(n[y]&1<<e);)f.sqrTo(a,C),x=a,a=C,C=x,--e<0&&(e=this.DB-1,--y)}var T=f.revert(a);return r(null,T),T}A.prototype.copyTo=Fr;A.prototype.fromInt=Rr;A.prototype.fromString=Pr;A.prototype.clamp=Br;A.prototype.dlShiftTo=kr;A.prototype.drShiftTo=Lr;A.prototype.lShiftTo=Vr;A.prototype.rShiftTo=qr;A.prototype.subTo=Hr;A.prototype.multiplyTo=jr;A.prototype.squareTo=Yr;A.prototype.divRemTo=Wr;A.prototype.invDigit=Jr;A.prototype.addTo=$r;A.prototype.toString=br;A.prototype.negate=Mr;A.prototype.abs=Or;A.prototype.compareTo=Nr;A.prototype.bitLength=Kr;A.prototype.mod=Gr;A.prototype.equals=Zr;A.prototype.add=zr;A.prototype.subtract=Xr;A.prototype.multiply=Qr;A.prototype.divide=en;A.prototype.modPow=an;A.ZERO=qe(0);A.ONE=qe(1);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */function Ie(n){return _.Buffer.from(new Lt().random(n).toString(),"hex")}var un=/^[89a-f]/i,fn="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",hn="userAttributes.",re=function(){function n(r){this.N=new A(fn,16),this.g=new A("2",16),this.k=new A(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=_.Buffer.from("Caldera Derived Key","utf8"),this.poolName=r}var t=n.prototype;return t.getSmallAValue=function(){return this.smallAValue},t.getLargeAValue=function(e){var s=this;this.largeAValue?e(null,this.largeAValue):this.calculateA(this.smallAValue,function(a,f){a&&e(a,null),s.largeAValue=f,e(null,s.largeAValue)})},t.generateRandomSmallA=function(){var e=Ie(128).toString("hex"),s=new A(e,16);return s},t.generateRandomString=function(){return Ie(40).toString("base64")},t.getRandomPassword=function(){return this.randomPassword},t.getSaltDevices=function(){return this.SaltToHashDevices},t.getVerifierDevices=function(){return this.verifierDevices},t.generateHashDevice=function(e,s,a){var f=this;this.randomPassword=this.generateRandomString();var u=""+e+s+":"+this.randomPassword,l=this.hash(u),d=Ie(16).toString("hex");this.SaltToHashDevices=this.padHex(new A(d,16)),this.g.modPow(new A(this.hexHash(this.SaltToHashDevices+l),16),this.N,function(p,v){p&&a(p,null),f.verifierDevices=f.padHex(v),a(null,null)})},t.calculateA=function(e,s){var a=this;this.g.modPow(e,this.N,function(f,u){f&&s(f,null),u.mod(a.N).equals(A.ZERO)&&s(new Error("Illegal paramater. A mod N cannot be 0."),null),s(null,u)})},t.calculateU=function(e,s){this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(s));var a=new A(this.UHexHash,16);return a},t.hash=function(e){var s=new ie.Sha256;s.update(e);var a=s.digestSync(),f=_.Buffer.from(a).toString("hex");return new Array(64-f.length).join("0")+f},t.hexHash=function(e){return this.hash(_.Buffer.from(e,"hex"))},t.computehkdf=function(e,s){var a=_.Buffer.concat([this.infoBits,_.Buffer.from(String.fromCharCode(1),"utf8")]),f=new ie.Sha256(s);f.update(e);var u=f.digestSync(),l=new ie.Sha256(u);l.update(a);var d=l.digestSync(),p=d,v=p.slice(0,16);return v},t.getPasswordAuthenticationKey=function(e,s,a,f,u){var l=this;if(a.mod(this.N).equals(A.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,a),this.UValue.equals(A.ZERO))throw new Error("U cannot be zero.");var d=""+this.poolName+e+":"+s,p=this.hash(d),v=new A(this.hexHash(this.padHex(f)+p),16);this.calculateS(v,a,function(y,w){y&&u(y,null);var U=l.computehkdf(_.Buffer.from(l.padHex(w),"hex"),_.Buffer.from(l.padHex(l.UValue),"hex"));u(null,U)})},t.calculateS=function(e,s,a){var f=this;this.g.modPow(e,this.N,function(u,l){u&&a(u,null);var d=s.subtract(f.k.multiply(l));d.modPow(f.smallAValue.add(f.UValue.multiply(e)),f.N,function(p,v){p&&a(p,null),a(null,v.mod(f.N))})})},t.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return hn},t.padHex=function(e){if(!(e instanceof A))throw new Error("Not a BigInteger");var s=e.compareTo(A.ZERO)<0,a=e.abs().toString(16);if(a=a.length%2!==0?"0"+a:a,a=un.test(a)?"00"+a:a,s){var f=a.split("").map(function(l){var d=~parseInt(l,16)&15;return"0123456789ABCDEF".charAt(d)}).join(""),u=new A(f,16).add(A.ONE);a=u.toString(16),a.toUpperCase().startsWith("FF8")&&(a=a.substring(2))}return a},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var dt=function(){function n(r){this.jwtToken=r||"",this.payload=this.decodePayload()}var t=n.prototype;return t.getJwtToken=function(){return this.jwtToken},t.getExpiration=function(){return this.payload.exp},t.getIssuedAt=function(){return this.payload.iat},t.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(_.Buffer.from(e,"base64").toString("utf8"))}catch{return{}}},n}();function cn(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,Me(n,t)}function Me(n,t){return Me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,s){return e.__proto__=s,e},Me(n,t)}var tt=function(n){cn(t,n);function t(r){var e=r===void 0?{}:r,s=e.AccessToken;return n.call(this,s||"")||this}return t}(dt);function ln(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,Oe(n,t)}function Oe(n,t){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,s){return e.__proto__=s,e},Oe(n,t)}var rt=function(n){ln(t,n);function t(r){var e=r===void 0?{}:r,s=e.IdToken;return n.call(this,s||"")||this}return t}(dt);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var nt=function(){function n(r){var e=r===void 0?{}:r,s=e.RefreshToken;this.token=s||""}var t=n.prototype;return t.getToken=function(){return this.token},n}(),dn="5.0.4";/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var gn="aws-amplify/"+dn,gt={userAgent:gn,isReactNative:typeof navigator<"u"&&navigator.product==="ReactNative"},pn=function(){return gt.userAgent};/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var it=function(){function n(r){var e=r===void 0?{}:r,s=e.IdToken,a=e.RefreshToken,f=e.AccessToken,u=e.ClockDrift;if(f==null||s==null)throw new Error("Id token and Access Token must be present.");this.idToken=s,this.refreshToken=a,this.accessToken=f,this.clockDrift=u===void 0?this.calculateClockDrift():u}var t=n.prototype;return t.getIdToken=function(){return this.idToken},t.getRefreshToken=function(){return this.refreshToken},t.getAccessToken=function(){return this.accessToken},t.getClockDrift=function(){return this.clockDrift},t.calculateClockDrift=function(){var e=Math.floor(new Date/1e3),s=Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt());return e-s},t.isValid=function(){var e=Math.floor(new Date/1e3),s=e-this.clockDrift;return s<this.accessToken.getExpiration()&&s<this.idToken.getExpiration()},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var vn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],yn=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],st=function(){function n(){}var t=n.prototype;return t.getNowString=function(){var e=new Date,s=yn[e.getUTCDay()],a=vn[e.getUTCMonth()],f=e.getUTCDate(),u=e.getUTCHours();u<10&&(u="0"+u);var l=e.getUTCMinutes();l<10&&(l="0"+l);var d=e.getUTCSeconds();d<10&&(d="0"+d);var p=e.getUTCFullYear(),v=s+" "+a+" "+f+" "+u+":"+l+":"+d+" UTC "+p;return v},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var mn=function(){function n(r){var e=r===void 0?{}:r,s=e.Name,a=e.Value;this.Name=s||"",this.Value=a||""}var t=n.prototype;return t.getValue=function(){return this.Value},t.setValue=function(e){return this.Value=e,this},t.getName=function(){return this.Name},t.setName=function(e){return this.Name=e,this},t.toString=function(){return JSON.stringify(this)},t.toJSON=function(){return{Name:this.Name,Value:this.Value}},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Z={},Sn=function(){function n(){}return n.setItem=function(r,e){return Z[r]=e,Z[r]},n.getItem=function(r){return Object.prototype.hasOwnProperty.call(Z,r)?Z[r]:void 0},n.removeItem=function(r){return delete Z[r]},n.clear=function(){return Z={},Z},n}(),pt=function(){function n(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch{this.storageWindow=Sn}}var t=n.prototype;return t.getStorage=function(){return this.storageWindow},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var wn=typeof navigator<"u",ot=wn?gt.isReactNative?"react-native":navigator.userAgent:"nodejs",at=function(){function n(r){if(r==null||r.Username==null||r.Pool==null)throw new Error("Username and Pool information are required.");this.username=r.Username||"",this.pool=r.Pool,this.Session=null,this.client=r.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=r.Storage||new pt().getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var t=n.prototype;return t.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},t.getSignInUserSession=function(){return this.signInUserSession},t.getUsername=function(){return this.username},t.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},t.initiateAuth=function(e,s){var a=this,f=e.getAuthParameters();f.USERNAME=this.username;var u=Object.keys(e.getValidationData()).length!==0?e.getValidationData():e.getClientMetadata(),l={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:f,ClientMetadata:u};this.getUserContextData()&&(l.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",l,function(d,p){if(d)return s.onFailure(d);var v=p.ChallengeName,y=p.ChallengeParameters;return v==="CUSTOM_CHALLENGE"?(a.Session=p.Session,s.customChallenge(y)):(a.signInUserSession=a.getCognitoUserSession(p.AuthenticationResult),a.cacheTokens(),s.onSuccess(a.signInUserSession))})},t.authenticateUser=function(e,s){return this.authenticationFlowType==="USER_PASSWORD_AUTH"?this.authenticateUserPlainUsernamePassword(e,s):this.authenticationFlowType==="USER_SRP_AUTH"||this.authenticationFlowType==="CUSTOM_AUTH"?this.authenticateUserDefaultAuth(e,s):s.onFailure(new Error("Authentication flow type is invalid."))},t.authenticateUserDefaultAuth=function(e,s){var a=this,f=new re(this.pool.getUserPoolName()),u=new st,l,d,p={};this.deviceKey!=null&&(p.DEVICE_KEY=this.deviceKey),p.USERNAME=this.username,f.getLargeAValue(function(v,y){v&&s.onFailure(v),p.SRP_A=y.toString(16),a.authenticationFlowType==="CUSTOM_AUTH"&&(p.CHALLENGE_NAME="SRP_A");var w=Object.keys(e.getValidationData()).length!==0?e.getValidationData():e.getClientMetadata(),U={AuthFlow:a.authenticationFlowType,ClientId:a.pool.getClientId(),AuthParameters:p,ClientMetadata:w};a.getUserContextData(a.username)&&(U.UserContextData=a.getUserContextData(a.username)),a.client.request("InitiateAuth",U,function(C,x){if(C)return s.onFailure(C);var T=x.ChallengeParameters;a.username=T.USER_ID_FOR_SRP,a.userDataKey=a.keyPrefix+"."+a.username+".userData",l=new A(T.SRP_B,16),d=new A(T.SALT,16),a.getCachedDeviceKeyAndPassword(),f.getPasswordAuthenticationKey(a.username,e.getPassword(),l,d,function(P,$){P&&s.onFailure(P);var K=u.getNowString(),W=_.Buffer.concat([_.Buffer.from(a.pool.getUserPoolName(),"utf8"),_.Buffer.from(a.username,"utf8"),_.Buffer.from(T.SECRET_BLOCK,"base64"),_.Buffer.from(K,"utf8")]),G=new ie.Sha256($);G.update(W);var ae=G.digestSync(),H=_.Buffer.from(ae).toString("base64"),O={};O.USERNAME=a.username,O.PASSWORD_CLAIM_SECRET_BLOCK=T.SECRET_BLOCK,O.TIMESTAMP=K,O.PASSWORD_CLAIM_SIGNATURE=H,a.deviceKey!=null&&(O.DEVICE_KEY=a.deviceKey);var z=function Q(ee,ue){return a.client.request("RespondToAuthChallenge",ee,function(J,De){return J&&J.code==="ResourceNotFoundException"&&J.message.toLowerCase().indexOf("device")!==-1?(O.DEVICE_KEY=null,a.deviceKey=null,a.randomPassword=null,a.deviceGroupKey=null,a.clearCachedDeviceKeyAndPassword(),Q(ee,ue)):ue(J,De)})},X={ChallengeName:"PASSWORD_VERIFIER",ClientId:a.pool.getClientId(),ChallengeResponses:O,Session:x.Session,ClientMetadata:w};a.getUserContextData()&&(X.UserContextData=a.getUserContextData()),z(X,function(Q,ee){return Q?s.onFailure(Q):a.authenticateUserInternal(ee,f,s)})})})})},t.authenticateUserPlainUsernamePassword=function(e,s){var a=this,f={};if(f.USERNAME=this.username,f.PASSWORD=e.getPassword(),!f.PASSWORD){s.onFailure(new Error("PASSWORD parameter is required"));return}var u=new re(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(f.DEVICE_KEY=this.deviceKey);var l=Object.keys(e.getValidationData()).length!==0?e.getValidationData():e.getClientMetadata(),d={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:f,ClientMetadata:l};this.getUserContextData(this.username)&&(d.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",d,function(p,v){return p?s.onFailure(p):a.authenticateUserInternal(v,u,s)})},t.authenticateUserInternal=function(e,s,a){var f=this,u=e.ChallengeName,l=e.ChallengeParameters;if(u==="SMS_MFA")return this.Session=e.Session,a.mfaRequired(u,l);if(u==="SELECT_MFA_TYPE")return this.Session=e.Session,a.selectMFAType(u,l);if(u==="MFA_SETUP")return this.Session=e.Session,a.mfaSetup(u,l);if(u==="SOFTWARE_TOKEN_MFA")return this.Session=e.Session,a.totpRequired(u,l);if(u==="CUSTOM_CHALLENGE")return this.Session=e.Session,a.customChallenge(l);if(u==="NEW_PASSWORD_REQUIRED"){this.Session=e.Session;var d=null,p=null,v=[],y=s.getNewPasswordRequiredChallengeUserAttributePrefix();if(l&&(d=JSON.parse(e.ChallengeParameters.userAttributes),p=JSON.parse(e.ChallengeParameters.requiredAttributes)),p)for(var w=0;w<p.length;w++)v[w]=p[w].substr(y.length);return a.newPasswordRequired(d,v)}if(u==="DEVICE_SRP_AUTH"){this.Session=e.Session,this.getDeviceResponse(a);return}this.signInUserSession=this.getCognitoUserSession(e.AuthenticationResult),this.challengeName=u,this.cacheTokens();var U=e.AuthenticationResult.NewDeviceMetadata;if(U==null)return a.onSuccess(this.signInUserSession);s.generateHashDevice(e.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,e.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(C){if(C)return a.onFailure(C);var x={Salt:_.Buffer.from(s.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:_.Buffer.from(s.getVerifierDevices(),"hex").toString("base64")};f.verifierDevices=x.PasswordVerifier,f.deviceGroupKey=U.DeviceGroupKey,f.randomPassword=s.getRandomPassword(),f.client.request("ConfirmDevice",{DeviceKey:U.DeviceKey,AccessToken:f.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:x,DeviceName:ot},function(T,P){return T?a.onFailure(T):(f.deviceKey=e.AuthenticationResult.NewDeviceMetadata.DeviceKey,f.cacheDeviceKeyAndPassword(),P.UserConfirmationNecessary===!0?a.onSuccess(f.signInUserSession,P.UserConfirmationNecessary):a.onSuccess(f.signInUserSession))})})},t.completeNewPasswordChallenge=function(e,s,a,f){var u=this;if(!e)return a.onFailure(new Error("New password is required."));var l=new re(this.pool.getUserPoolName()),d=l.getNewPasswordRequiredChallengeUserAttributePrefix(),p={};s&&Object.keys(s).forEach(function(y){p[d+y]=s[y]}),p.NEW_PASSWORD=e,p.USERNAME=this.username;var v={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:p,Session:this.Session,ClientMetadata:f};this.getUserContextData()&&(v.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",v,function(y,w){return y?a.onFailure(y):u.authenticateUserInternal(w,l,a)})},t.getDeviceResponse=function(e,s){var a=this,f=new re(this.deviceGroupKey),u=new st,l={};l.USERNAME=this.username,l.DEVICE_KEY=this.deviceKey,f.getLargeAValue(function(d,p){d&&e.onFailure(d),l.SRP_A=p.toString(16);var v={ChallengeName:"DEVICE_SRP_AUTH",ClientId:a.pool.getClientId(),ChallengeResponses:l,ClientMetadata:s,Session:a.Session};a.getUserContextData()&&(v.UserContextData=a.getUserContextData()),a.client.request("RespondToAuthChallenge",v,function(y,w){if(y)return e.onFailure(y);var U=w.ChallengeParameters,C=new A(U.SRP_B,16),x=new A(U.SALT,16);f.getPasswordAuthenticationKey(a.deviceKey,a.randomPassword,C,x,function(T,P){if(T)return e.onFailure(T);var $=u.getNowString(),K=_.Buffer.concat([_.Buffer.from(a.deviceGroupKey,"utf8"),_.Buffer.from(a.deviceKey,"utf8"),_.Buffer.from(U.SECRET_BLOCK,"base64"),_.Buffer.from($,"utf8")]),W=new ie.Sha256(P);W.update(K);var G=W.digestSync(),ae=_.Buffer.from(G).toString("base64"),H={};H.USERNAME=a.username,H.PASSWORD_CLAIM_SECRET_BLOCK=U.SECRET_BLOCK,H.TIMESTAMP=$,H.PASSWORD_CLAIM_SIGNATURE=ae,H.DEVICE_KEY=a.deviceKey;var O={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:a.pool.getClientId(),ChallengeResponses:H,Session:w.Session};a.getUserContextData()&&(O.UserContextData=a.getUserContextData()),a.client.request("RespondToAuthChallenge",O,function(z,X){return z?e.onFailure(z):(a.signInUserSession=a.getCognitoUserSession(X.AuthenticationResult),a.cacheTokens(),e.onSuccess(a.signInUserSession))})})})})},t.confirmRegistration=function(e,s,a,f){var u={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:s,ClientMetadata:f};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",u,function(l){return l?a(l,null):a(null,"SUCCESS")})},t.sendCustomChallengeAnswer=function(e,s,a){var f=this,u={};u.USERNAME=this.username,u.ANSWER=e;var l=new re(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(u.DEVICE_KEY=this.deviceKey);var d={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:u,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:a};this.getUserContextData()&&(d.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",d,function(p,v){return p?s.onFailure(p):f.authenticateUserInternal(v,l,s)})},t.sendMFACode=function(e,s,a,f){var u=this,l={};l.USERNAME=this.username,l.SMS_MFA_CODE=e;var d=a||"SMS_MFA";d==="SOFTWARE_TOKEN_MFA"&&(l.SOFTWARE_TOKEN_MFA_CODE=e),this.deviceKey!=null&&(l.DEVICE_KEY=this.deviceKey);var p={ChallengeName:d,ChallengeResponses:l,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:f};this.getUserContextData()&&(p.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",p,function(v,y){if(v)return s.onFailure(v);var w=y.ChallengeName;if(w==="DEVICE_SRP_AUTH"){u.getDeviceResponse(s);return}if(u.signInUserSession=u.getCognitoUserSession(y.AuthenticationResult),u.cacheTokens(),y.AuthenticationResult.NewDeviceMetadata==null)return s.onSuccess(u.signInUserSession);var U=new re(u.pool.getUserPoolName());U.generateHashDevice(y.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,y.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(C){if(C)return s.onFailure(C);var x={Salt:_.Buffer.from(U.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:_.Buffer.from(U.getVerifierDevices(),"hex").toString("base64")};u.verifierDevices=x.PasswordVerifier,u.deviceGroupKey=y.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,u.randomPassword=U.getRandomPassword(),u.client.request("ConfirmDevice",{DeviceKey:y.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:u.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:x,DeviceName:ot},function(T,P){return T?s.onFailure(T):(u.deviceKey=y.AuthenticationResult.NewDeviceMetadata.DeviceKey,u.cacheDeviceKeyAndPassword(),P.UserConfirmationNecessary===!0?s.onSuccess(u.signInUserSession,P.UserConfirmationNecessary):s.onSuccess(u.signInUserSession))})})})},t.changePassword=function(e,s,a,f){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return a(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:s,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:f},function(u){return u?a(u,null):a(null,"SUCCESS")})},t.enableMFA=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var s=[],a={DeliveryMedium:"SMS",AttributeName:"phone_number"};s.push(a),this.client.request("SetUserSettings",{MFAOptions:s,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(f){return f?e(f,null):e(null,"SUCCESS")})},t.setUserMfaPreference=function(e,s,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return a(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:s,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(f){return f?a(f,null):a(null,"SUCCESS")})},t.disableMFA=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var s=[];this.client.request("SetUserSettings",{MFAOptions:s,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?e(a,null):e(null,"SUCCESS")})},t.deleteUser=function(e,s){var a=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:s},function(f){return f?e(f,null):(a.clearCachedUser(),e(null,"SUCCESS"))})},t.updateAttributes=function(e,s,a){var f=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return s(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:a},function(u,l){return u?s(u,null):f.getUserData(function(){return s(null,"SUCCESS",l)},{bypassCache:!0})})},t.getUserAttributes=function(e){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s,a){if(s)return e(s,null);for(var f=[],u=0;u<a.UserAttributes.length;u++){var l={Name:a.UserAttributes[u].Name,Value:a.UserAttributes[u].Value},d=new mn(l);f.push(d)}return e(null,f)})},t.getMFAOptions=function(e){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s,a){return s?e(s,null):e(null,a.MFAOptions)})},t.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},t.refreshSessionIfPossible=function(e){var s=this;return e===void 0&&(e={}),new Promise(function(a){var f=s.signInUserSession.getRefreshToken();f&&f.getToken()?s.refreshSession(f,a,e.clientMetadata):a()})},t.getUserData=function(e,s){var a=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return this.clearCachedUserData(),e(new Error("User is not authenticated"),null);var f=this.getUserDataFromCache();if(!f){this.fetchUserData().then(function(u){e(null,u)}).catch(e);return}if(this.isFetchUserDataAndTokenRequired(s)){this.fetchUserData().then(function(u){return a.refreshSessionIfPossible(s).then(function(){return u})}).then(function(u){return e(null,u)}).catch(e);return}try{e(null,JSON.parse(f));return}catch(u){this.clearCachedUserData(),e(u,null);return}},t.getUserDataFromCache=function(){var e=this.storage.getItem(this.userDataKey);return e},t.isFetchUserDataAndTokenRequired=function(e){var s=e||{},a=s.bypassCache,f=a===void 0?!1:a;return f},t.fetchUserData=function(){var e=this;return this.createGetUserRequest().then(function(s){return e.cacheUserData(s),s})},t.deleteAttributes=function(e,s){var a=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return s(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(f){return f?s(f,null):a.getUserData(function(){return s(null,"SUCCESS")},{bypassCache:!0})})},t.resendConfirmationCode=function(e,s){var a={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:s};this.client.request("ResendConfirmationCode",a,function(f,u){return f?e(f,null):e(null,u)})},t.getSession=function(e,s){if(s===void 0&&(s={}),this.username==null)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(this.signInUserSession!=null&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var a="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,f=a+".idToken",u=a+".accessToken",l=a+".refreshToken",d=a+".clockDrift";if(this.storage.getItem(f)){var p=new rt({IdToken:this.storage.getItem(f)}),v=new tt({AccessToken:this.storage.getItem(u)}),y=new nt({RefreshToken:this.storage.getItem(l)}),w=parseInt(this.storage.getItem(d),0)||0,U={IdToken:p,AccessToken:v,RefreshToken:y,ClockDrift:w},C=new it(U);if(C.isValid())return this.signInUserSession=C,e(null,this.signInUserSession);if(!y.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(y,e,s.clientMetadata)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},t.refreshSession=function(e,s,a){var f=this,u=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(s):s,l={};l.REFRESH_TOKEN=e.getToken();var d="CognitoIdentityServiceProvider."+this.pool.getClientId(),p=d+".LastAuthUser";if(this.storage.getItem(p)){this.username=this.storage.getItem(p);var v=d+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(v),l.DEVICE_KEY=this.deviceKey}var y={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:l,ClientMetadata:a};this.getUserContextData()&&(y.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",y,function(w,U){if(w)return w.code==="NotAuthorizedException"&&f.clearCachedUser(),u(w,null);if(U){var C=U.AuthenticationResult;return Object.prototype.hasOwnProperty.call(C,"RefreshToken")||(C.RefreshToken=e.getToken()),f.signInUserSession=f.getCognitoUserSession(C),f.cacheTokens(),u(null,f.signInUserSession)}})},t.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),s=e+"."+this.username+".idToken",a=e+"."+this.username+".accessToken",f=e+"."+this.username+".refreshToken",u=e+"."+this.username+".clockDrift",l=e+".LastAuthUser";this.storage.setItem(s,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(a,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(f,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(u,""+this.signInUserSession.getClockDrift()),this.storage.setItem(l,this.username)},t.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},t.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},t.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,s=e+".deviceKey",a=e+".randomPasswordKey",f=e+".deviceGroupKey";this.storage.setItem(s,this.deviceKey),this.storage.setItem(a,this.randomPassword),this.storage.setItem(f,this.deviceGroupKey)},t.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,s=e+".deviceKey",a=e+".randomPasswordKey",f=e+".deviceGroupKey";this.storage.getItem(s)&&(this.deviceKey=this.storage.getItem(s),this.randomPassword=this.storage.getItem(a),this.deviceGroupKey=this.storage.getItem(f))},t.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,s=e+".deviceKey",a=e+".randomPasswordKey",f=e+".deviceGroupKey";this.storage.removeItem(s),this.storage.removeItem(a),this.storage.removeItem(f)},t.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),s=e+"."+this.username+".idToken",a=e+"."+this.username+".accessToken",f=e+"."+this.username+".refreshToken",u=e+".LastAuthUser",l=e+"."+this.username+".clockDrift";this.storage.removeItem(s),this.storage.removeItem(a),this.storage.removeItem(f),this.storage.removeItem(u),this.storage.removeItem(l)},t.getCognitoUserSession=function(e){var s=new rt(e),a=new tt(e),f=new nt(e),u={IdToken:s,AccessToken:a,RefreshToken:f};return new it(u)},t.forgotPassword=function(e,s){var a={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:s};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",a,function(f,u){return f?e.onFailure(f):typeof e.inputVerificationCode=="function"?e.inputVerificationCode(u):e.onSuccess(u)})},t.confirmPassword=function(e,s,a,f){var u={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:s,ClientMetadata:f};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",u,function(l){return l?a.onFailure(l):a.onSuccess("SUCCESS")})},t.getAttributeVerificationCode=function(e,s,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return s.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:a},function(f,u){return f?s.onFailure(f):typeof s.inputVerificationCode=="function"?s.inputVerificationCode(u):s.onSuccess("SUCCESS")})},t.verifyAttribute=function(e,s,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return a.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:s,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(f){return f?a.onFailure(f):a.onSuccess("SUCCESS")})},t.getDevice=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(s,a){return s?e.onFailure(s):e.onSuccess(a)})},t.forgetSpecificDevice=function(e,s){if(this.signInUserSession==null||!this.signInUserSession.isValid())return s.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},function(a){return a?s.onFailure(a):s.onSuccess("SUCCESS")})},t.forgetDevice=function(e){var s=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:e.onFailure,onSuccess:function(f){return s.deviceKey=null,s.deviceGroupKey=null,s.randomPassword=null,s.clearCachedDeviceKeyAndPassword(),e.onSuccess(f)}})},t.setDeviceStatusRemembered=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(s){return s?e.onFailure(s):e.onSuccess("SUCCESS")})},t.setDeviceStatusNotRemembered=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(s){return s?e.onFailure(s):e.onSuccess("SUCCESS")})},t.listDevices=function(e,s,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return a.onFailure(new Error("User is not authenticated"));var f={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};s&&(f.PaginationToken=s),this.client.request("ListDevices",f,function(u,l){return u?a.onFailure(u):a.onSuccess(l)})},t.globalSignOut=function(e){var s=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?e.onFailure(a):(s.clearCachedUser(),e.onSuccess("SUCCESS"))})},t.signOut=function(e){var s=this;if(!e||typeof e!="function"){this.cleanClientData();return}this.getSession(function(a,f){if(a)return e(a);s.revokeTokens(function(u){s.cleanClientData(),e(u)})})},t.revokeTokens=function(e){if(e===void 0&&(e=function(){}),typeof e!="function")throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession){var s=new Error("User is not authenticated");return e(s)}if(!this.signInUserSession.getAccessToken()){var a=new Error("No Access token available");return e(a)}var f=this.signInUserSession.getRefreshToken().getToken(),u=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(u)&&f)return this.revokeToken({token:f,callback:e});e()},t.isSessionRevocable=function(e){if(e&&typeof e.decodePayload=="function")try{var s=e.decodePayload(),a=s.origin_jti;return!!a}catch{}return!1},t.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},t.revokeToken=function(e){var s=e.token,a=e.callback;this.client.requestWithRetry("RevokeToken",{Token:s,ClientId:this.pool.getClientId()},function(f){if(f)return a(f);a()})},t.sendMFASelectionAnswer=function(e,s){var a=this,f={};f.USERNAME=this.username,f.ANSWER=e;var u={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:f,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,function(l,d){if(l)return s.onFailure(l);if(a.Session=d.Session,e==="SMS_MFA")return s.mfaRequired(d.ChallengeName,d.ChallengeParameters);if(e==="SOFTWARE_TOKEN_MFA")return s.totpRequired(d.ChallengeName,d.ChallengeParameters)})},t.getUserContextData=function(){var e=this.pool;return e.getUserContextData(this.username)},t.associateSoftwareToken=function(e){var s=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a,f){return a?e.onFailure(a):e.associateSecretCode(f.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(a,f){return a?e.onFailure(a):(s.Session=f.Session,e.associateSecretCode(f.SecretCode))})},t.verifySoftwareToken=function(e,s,a){var f=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:s},function(u,l){return u?a.onFailure(u):a.onSuccess(l)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:s},function(u,l){if(u)return a.onFailure(u);f.Session=l.Session;var d={};d.USERNAME=f.username;var p={ChallengeName:"MFA_SETUP",ClientId:f.pool.getClientId(),ChallengeResponses:d,Session:f.Session};f.getUserContextData()&&(p.UserContextData=f.getUserContextData()),f.client.request("RespondToAuthChallenge",p,function(v,y){return v?a.onFailure(v):(f.signInUserSession=f.getCognitoUserSession(y.AuthenticationResult),f.cacheTokens(),a.onSuccess(f.signInUserSession))})})},n}();function An(n,t){return t=t||{},new Promise(function(r,e){var s=new XMLHttpRequest,a=[],f=[],u={},l=function(){return{ok:(s.status/100|0)==2,statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:l,headers:{keys:function(){return a},entries:function(){return f},get:function(p){return u[p.toLowerCase()]},has:function(p){return p.toLowerCase()in u}}}};for(var d in s.open(t.method||"get",n,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(p,v,y){a.push(v=v.toLowerCase()),f.push([v,y]),u[v]=u[v]?u[v]+","+y:y}),r(l())},s.onerror=e,s.withCredentials=t.credentials=="include",t.headers)s.setRequestHeader(d,t.headers[d]);s.send(t.body||null)})}const Cn=Object.freeze(Object.defineProperty({__proto__:null,default:An},Symbol.toStringTag,{value:"Module"})),ut=ke(Cn);self.fetch||(self.fetch=ut.default||ut);function ne(){}ne.prototype.userAgent=pn();var Un=function(t){var r=ne.category?" "+ne.category:"",e=ne.framework?" framework/"+ne.framework:"",s=""+ne.prototype.userAgent+r+e;return s};function En(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,he(n,t)}function Ne(n){var t=typeof Map=="function"?new Map:void 0;return Ne=function(e){if(e===null||!xn(e))return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(e))return t.get(e);t.set(e,s)}function s(){return ye(e,arguments,Ke(this).constructor)}return s.prototype=Object.create(e.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),he(s,e)},Ne(n)}function ye(n,t,r){return Tn()?ye=Reflect.construct.bind():ye=function(s,a,f){var u=[null];u.push.apply(u,a);var l=Function.bind.apply(s,u),d=new l;return f&&he(d,f.prototype),d},ye.apply(null,arguments)}function Tn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xn(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function he(n,t){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,s){return e.__proto__=s,e},he(n,t)}function Ke(n){return Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ke(n)}var Dn=function(n){En(t,n);function t(r,e,s,a){var f;return f=n.call(this,r)||this,f.code=e,f.name=s,f.statusCode=a,f}return t}(Ne(Error)),_n=function(){function n(r,e,s){this.endpoint=e||"https://cognito-idp."+r+".amazonaws.com/";var a=s||{},f=a.credentials;this.fetchOptions=f?{credentials:f}:{}}var t=n.prototype;return t.promisifyRequest=function(e,s){var a=this;return new Promise(function(f,u){a.request(e,s,function(l,d){l?u(new Dn(l.message,l.code,l.name,l.statusCode)):f(d)})})},t.requestWithRetry=function(e,s,a){var f=this,u=5*1e3;Pn(function(l){return new Promise(function(d,p){f.request(e,l,function(v,y){v?p(v):d(y)})})},[s],u).then(function(l){return a(null,l)}).catch(function(l){return a(l)})},t.request=function(e,s,a){var f={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":Un(),"Cache-Control":"no-store"},u=Object.assign({},this.fetchOptions,{headers:f,method:"POST",mode:"cors",body:JSON.stringify(s)}),l;fetch(this.endpoint,u).then(function(d){return l=d,d},function(d){throw d instanceof TypeError?new Error("Network error"):d}).then(function(d){return d.json().catch(function(){return{}})}).then(function(d){if(l.ok)return a(null,d);var p=(d.__type||d.code).split("#").pop(),v=new Error(d.message||d.Message||null);return v.name=p,v.code=p,a(v)}).catch(function(d){if(l&&l.headers&&l.headers.get("x-amzn-errortype"))try{var p=l.headers.get("x-amzn-errortype").split(":")[0],v=new Error(l.status?l.status.toString():null);return v.code=p,v.name=p,v.statusCode=l.status,a(v)}catch{return a(d)}else d instanceof Error&&d.message==="Network error"&&(d.code="NetworkError");return a(d)})},n}(),ve={debug:function(){}},In=function(t){var r="nonRetryable";return t&&t[r]};function vt(n,t,r,e){if(e===void 0&&(e=1),typeof n!="function")throw Error("functionToRetry must be a function");return ve.debug(n.name+" attempt #"+e+" with args: "+JSON.stringify(t)),n.apply(void 0,t).catch(function(s){if(ve.debug("error on "+n.name,s),In(s))throw ve.debug(n.name+" non retryable error",s),s;var a=r(e,t,s);if(ve.debug(n.name+" retrying in "+a+" ms"),a!==!1)return new Promise(function(f){return setTimeout(f,a)}).then(function(){return vt(n,t,r,e+1)});throw s})}function Fn(n){var t=100,r=100;return function(e){var s=Math.pow(2,e)*t+r*Math.random();return s>n?!1:s}}var Rn=5*60*1e3;function Pn(n,t,r){return r===void 0&&(r=Rn),vt(n,t,Fn(r))}/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Bn=55,Mn=function(){function n(r,e){var s=r||{},a=s.UserPoolId,f=s.ClientId,u=s.endpoint,l=s.fetchOptions,d=s.AdvancedSecurityDataCollectionFlag;if(!a||!f)throw new Error("Both UserPoolId and ClientId are required.");if(a.length>Bn||!/^[\w-]+_[0-9a-zA-Z]+$/.test(a))throw new Error("Invalid UserPoolId format.");var p=a.split("_")[0];this.userPoolId=a,this.clientId=f,this.client=new _n(p,u,l),this.advancedSecurityDataCollectionFlag=d!==!1,this.storage=r.Storage||new pt().getStorage(),e&&(this.wrapRefreshSessionCallback=e)}var t=n.prototype;return t.getUserPoolId=function(){return this.userPoolId},t.getUserPoolName=function(){return this.getUserPoolId().split("_")[1]},t.getClientId=function(){return this.clientId},t.signUp=function(e,s,a,f,u,l){var d=this,p={ClientId:this.clientId,Username:e,Password:s,UserAttributes:a,ValidationData:f,ClientMetadata:l};this.getUserContextData(e)&&(p.UserContextData=this.getUserContextData(e)),this.client.request("SignUp",p,function(v,y){if(v)return u(v,null);var w={Username:e,Pool:d,Storage:d.storage},U={user:new at(w),userConfirmed:y.UserConfirmed,userSub:y.UserSub,codeDeliveryDetails:y.CodeDeliveryDetails};return u(null,U)})},t.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",s=this.storage.getItem(e);if(s){var a={Username:s,Pool:this,Storage:this.storage};return new at(a)}return null},t.getUserContextData=function(e){if(!(typeof AmazonCognitoAdvancedSecurityData>"u")){var s=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var a=s.getData(e,this.userPoolId,this.clientId);if(a){var f={EncodedData:a};return f}}return{}}},n}(),bn={exports:{}};/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */(function(n,t){(function(r){var e;if(n.exports=r(),e=!0,!e){var s=window.Cookies,a=window.Cookies=r();a.noConflict=function(){return window.Cookies=s,a}}})(function(){function r(){for(var a=0,f={};a<arguments.length;a++){var u=arguments[a];for(var l in u)f[l]=u[l]}return f}function e(a){return a.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function s(a){function f(){}function u(d,p,v){if(!(typeof document>"u")){v=r({path:"/"},f.defaults,v),typeof v.expires=="number"&&(v.expires=new Date(new Date*1+v.expires*864e5)),v.expires=v.expires?v.expires.toUTCString():"";try{var y=JSON.stringify(p);/^[\{\[]/.test(y)&&(p=y)}catch{}p=a.write?a.write(p,d):encodeURIComponent(String(p)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),d=encodeURIComponent(String(d)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var w="";for(var U in v)v[U]&&(w+="; "+U,v[U]!==!0&&(w+="="+v[U].split(";")[0]));return document.cookie=d+"="+p+w}}function l(d,p){if(!(typeof document>"u")){for(var v={},y=document.cookie?document.cookie.split("; "):[],w=0;w<y.length;w++){var U=y[w].split("="),C=U.slice(1).join("=");!p&&C.charAt(0)==='"'&&(C=C.slice(1,-1));try{var x=e(U[0]);if(C=(a.read||a)(C,x)||e(C),p)try{C=JSON.parse(C)}catch{}if(v[x]=C,d===x)break}catch{}}return d?v[d]:v}}return f.set=u,f.get=function(d){return l(d,!1)},f.getJSON=function(d){return l(d,!0)},f.remove=function(d,p){u(d,"",r(p,{expires:-1}))},f.defaults={},f.withConverter=s,f}return s(function(){})})})(bn);export{Mn as C,at as a,mn as b};
